<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="author" content="CodePel">
      <title> Upload crop & save Example </title>
      <!-- Style CSS -->

<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/cropper/2.3.4/cropper.min.css'>

<style>
	.result { max-width: 400px; max-height: 400px; background-color: #f30; }
    .cropped { width: auto; border: solid 2px #000; }
</style>
   </head>
   <body> 

 
		<input type="file" id="file-input">
		<div class="result"></div>
	    <img class="cropped" src="" alt="">
        <button class="save">Save</button>



    <script src="js/jquery-min.js" ></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/cropperjs/0.8.1/cropper.min.js'></script>
<script>
 
	
	// on change show image with crop options
	$('#file-input').on('change', e => {
		console.log(e.target.files.length);
	  if (e.target.files.length) {
		// start file reader
		const reader = new FileReader();
		reader.onload = evt => {
		  if (evt.target.result) 
          {
			let img = document.createElement('img');
			img.id = 'image';
			img.src = evt.target.result;
			$('.result').html('');
            $('.result').html(img)
			cropper = new Cropper(img);
		  }
		};
		reader.readAsDataURL(e.target.files[0]);
		console.log(e.target.files[0]);
	  }
	});
	
	// save on click
	$('.save').on('click', e => {
	  e.preventDefault();
	  let imgSrc = cropper.getCroppedCanvas({
		width: 300 
	  }).toDataURL();
 
     $('.cropped').attr('src',imgSrc).show();
	  $('.result').hide();
	  
 
	  console.log(imgSrc);
	});
	</script>



</body>
</html>